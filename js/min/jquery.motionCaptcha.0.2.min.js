jQuery.fn.motionCaptcha||function(t){function e(t){this.init(t)}function s(t,e){this.X=t,this.Y=e}function n(t,e){return new s(t,e)}function a(t,e,s,n){this.X=t,this.Y=e,this.Width=s,this.Height=n}function i(t,e){this.Name=t,this.Points=h(e,Y);var s=c(this.Points);this.Points=l(this.Points,-s),this.Points=u(this.Points,x),this.Points=d(this.Points,w),this.Vector=p(this.Points)}function r(t,e){this.Name=t,this.Score=e}function o(){this.Templates=[],this.Templates.push(new i("triangle",[n(137,139),n(135,141),n(133,144),n(132,146),n(130,149),n(128,151),n(126,155),n(123,160),n(120,166),n(116,171),n(112,177),n(107,183),n(102,188),n(100,191),n(95,195),n(90,199),n(86,203),n(82,206),n(80,209),n(75,213),n(73,213),n(70,216),n(67,219),n(64,221),n(61,223),n(60,225),n(62,226),n(65,225),n(67,226),n(74,226),n(77,227),n(85,229),n(91,230),n(99,231),n(108,232),n(116,233),n(125,233),n(134,234),n(145,233),n(153,232),n(160,233),n(170,234),n(177,235),n(179,236),n(186,237),n(193,238),n(198,239),n(200,237),n(202,239),n(204,238),n(206,234),n(205,230),n(202,222),n(197,216),n(192,207),n(186,198),n(179,189),n(174,183),n(170,178),n(164,171),n(161,168),n(154,160),n(148,155),n(143,150),n(138,148),n(136,148)])),this.Templates.push(new i("x",[n(87,142),n(89,145),n(91,148),n(93,151),n(96,155),n(98,157),n(100,160),n(102,162),n(106,167),n(108,169),n(110,171),n(115,177),n(119,183),n(123,189),n(127,193),n(129,196),n(133,200),n(137,206),n(140,209),n(143,212),n(146,215),n(151,220),n(153,222),n(155,223),n(157,225),n(158,223),n(157,218),n(155,211),n(154,208),n(152,200),n(150,189),n(148,179),n(147,170),n(147,158),n(147,148),n(147,141),n(147,136),n(144,135),n(142,137),n(140,139),n(135,145),n(131,152),n(124,163),n(116,177),n(108,191),n(100,206),n(94,217),n(91,222),n(89,225),n(87,226),n(87,224)])),this.Templates.push(new i("rectangle",[n(78,149),n(78,153),n(78,157),n(78,160),n(79,162),n(79,164),n(79,167),n(79,169),n(79,173),n(79,178),n(79,183),n(80,189),n(80,193),n(80,198),n(80,202),n(81,208),n(81,210),n(81,216),n(82,222),n(82,224),n(82,227),n(83,229),n(83,231),n(85,230),n(88,232),n(90,233),n(92,232),n(94,233),n(99,232),n(102,233),n(106,233),n(109,234),n(117,235),n(123,236),n(126,236),n(135,237),n(142,238),n(145,238),n(152,238),n(154,239),n(165,238),n(174,237),n(179,236),n(186,235),n(191,235),n(195,233),n(197,233),n(200,233),n(201,235),n(201,233),n(199,231),n(198,226),n(198,220),n(196,207),n(195,195),n(195,181),n(195,173),n(195,163),n(194,155),n(192,145),n(192,143),n(192,138),n(191,135),n(191,133),n(191,130),n(190,128),n(188,129),n(186,129),n(181,132),n(173,131),n(162,131),n(151,132),n(149,132),n(138,132),n(136,132),n(122,131),n(120,131),n(109,130),n(107,130),n(90,132),n(81,133),n(76,133)])),this.Templates.push(new i("circle",[n(127,141),n(124,140),n(120,139),n(118,139),n(116,139),n(111,140),n(109,141),n(104,144),n(100,147),n(96,152),n(93,157),n(90,163),n(87,169),n(85,175),n(83,181),n(82,190),n(82,195),n(83,200),n(84,205),n(88,213),n(91,216),n(96,219),n(103,222),n(108,224),n(111,224),n(120,224),n(133,223),n(142,222),n(152,218),n(160,214),n(167,210),n(173,204),n(178,198),n(179,196),n(182,188),n(182,177),n(178,167),n(170,150),n(163,138),n(152,130),n(143,129),n(140,131),n(129,136),n(126,139)])),this.Templates.push(new i("check",[n(91,185),n(93,185),n(95,185),n(97,185),n(100,188),n(102,189),n(104,190),n(106,193),n(108,195),n(110,198),n(112,201),n(114,204),n(115,207),n(117,210),n(118,212),n(120,214),n(121,217),n(122,219),n(123,222),n(124,224),n(126,226),n(127,229),n(129,231),n(130,233),n(129,231),n(129,228),n(129,226),n(129,224),n(129,221),n(129,218),n(129,212),n(129,208),n(130,198),n(132,189),n(134,182),n(137,173),n(143,164),n(147,157),n(151,151),n(155,144),n(161,137),n(165,131),n(171,122),n(174,118),n(176,114),n(177,112),n(177,114),n(175,116),n(173,118)])),this.Templates.push(new i("caret",[n(79,245),n(79,242),n(79,239),n(80,237),n(80,234),n(81,232),n(82,230),n(84,224),n(86,220),n(86,218),n(87,216),n(88,213),n(90,207),n(91,202),n(92,200),n(93,194),n(94,192),n(96,189),n(97,186),n(100,179),n(102,173),n(105,165),n(107,160),n(109,158),n(112,151),n(115,144),n(117,139),n(119,136),n(119,134),n(120,132),n(121,129),n(122,127),n(124,125),n(126,124),n(129,125),n(131,127),n(132,130),n(136,139),n(141,154),n(145,166),n(151,182),n(156,193),n(157,196),n(161,209),n(162,211),n(167,223),n(169,229),n(170,231),n(173,237),n(176,242),n(177,244),n(179,250),n(181,255),n(182,257)])),this.Templates.push(new i("zigzag",[n(307,216),n(333,186),n(356,215),n(375,186),n(399,216),n(418,186)])),this.Templates.push(new i("arrow",[n(68,222),n(70,220),n(73,218),n(75,217),n(77,215),n(80,213),n(82,212),n(84,210),n(87,209),n(89,208),n(92,206),n(95,204),n(101,201),n(106,198),n(112,194),n(118,191),n(124,187),n(127,186),n(132,183),n(138,181),n(141,180),n(146,178),n(154,173),n(159,171),n(161,170),n(166,167),n(168,167),n(171,166),n(174,164),n(177,162),n(180,160),n(182,158),n(183,156),n(181,154),n(178,153),n(171,153),n(164,153),n(160,153),n(150,154),n(147,155),n(141,157),n(137,158),n(135,158),n(137,158),n(140,157),n(143,156),n(151,154),n(160,152),n(170,149),n(179,147),n(185,145),n(192,144),n(196,144),n(198,144),n(200,144),n(201,147),n(199,149),n(194,157),n(191,160),n(186,167),n(180,176),n(177,179),n(171,187),n(169,189),n(165,194),n(164,196)])),this.Templates.push(new i("leftbracket",[n(140,124),n(138,123),n(135,122),n(133,123),n(130,123),n(128,124),n(125,125),n(122,124),n(120,124),n(118,124),n(116,125),n(113,125),n(111,125),n(108,124),n(106,125),n(104,125),n(102,124),n(100,123),n(98,123),n(95,124),n(93,123),n(90,124),n(88,124),n(85,125),n(83,126),n(81,127),n(81,129),n(82,131),n(82,134),n(83,138),n(84,141),n(84,144),n(85,148),n(85,151),n(86,156),n(86,160),n(86,164),n(86,168),n(87,171),n(87,175),n(87,179),n(87,182),n(87,186),n(88,188),n(88,195),n(88,198),n(88,201),n(88,207),n(89,211),n(89,213),n(89,217),n(89,222),n(88,225),n(88,229),n(88,231),n(88,233),n(88,235),n(89,237),n(89,240),n(89,242),n(91,241),n(94,241),n(96,240),n(98,239),n(105,240),n(109,240),n(113,239),n(116,240),n(121,239),n(130,240),n(136,237),n(139,237),n(144,238),n(151,237),n(157,236),n(159,237)])),this.Templates.push(new i("rightbracket",[n(112,138),n(112,136),n(115,136),n(118,137),n(120,136),n(123,136),n(125,136),n(128,136),n(131,136),n(134,135),n(137,135),n(140,134),n(143,133),n(145,132),n(147,132),n(149,132),n(152,132),n(153,134),n(154,137),n(155,141),n(156,144),n(157,152),n(158,161),n(160,170),n(162,182),n(164,192),n(166,200),n(167,209),n(168,214),n(168,216),n(169,221),n(169,223),n(169,228),n(169,231),n(166,233),n(164,234),n(161,235),n(155,236),n(147,235),n(140,233),n(131,233),n(124,233),n(117,235),n(114,238),n(112,238)])),this.Templates.push(new i("v",[n(89,164),n(90,162),n(92,162),n(94,164),n(95,166),n(96,169),n(97,171),n(99,175),n(101,178),n(103,182),n(106,189),n(108,194),n(111,199),n(114,204),n(117,209),n(119,214),n(122,218),n(124,222),n(126,225),n(128,228),n(130,229),n(133,233),n(134,236),n(136,239),n(138,240),n(139,242),n(140,244),n(142,242),n(142,240),n(142,237),n(143,235),n(143,233),n(145,229),n(146,226),n(148,217),n(149,208),n(149,205),n(151,196),n(151,193),n(153,182),n(155,172),n(157,165),n(159,160),n(162,155),n(164,150),n(165,148),n(166,146)])),this.Templates.push(new i("delete",[n(123,129),n(123,131),n(124,133),n(125,136),n(127,140),n(129,142),n(133,148),n(137,154),n(143,158),n(145,161),n(148,164),n(153,170),n(158,176),n(160,178),n(164,183),n(168,188),n(171,191),n(175,196),n(178,200),n(180,202),n(181,205),n(184,208),n(186,210),n(187,213),n(188,215),n(186,212),n(183,211),n(177,208),n(169,206),n(162,205),n(154,207),n(145,209),n(137,210),n(129,214),n(122,217),n(118,218),n(111,221),n(109,222),n(110,219),n(112,217),n(118,209),n(120,207),n(128,196),n(135,187),n(138,183),n(148,167),n(157,153),n(163,145),n(165,142),n(172,133),n(177,127),n(179,127),n(180,125)])),this.Templates.push(new i("star",[n(75,250),n(75,247),n(77,244),n(78,242),n(79,239),n(80,237),n(82,234),n(82,232),n(84,229),n(85,225),n(87,222),n(88,219),n(89,216),n(91,212),n(92,208),n(94,204),n(95,201),n(96,196),n(97,194),n(98,191),n(100,185),n(102,178),n(104,173),n(104,171),n(105,164),n(106,158),n(107,156),n(107,152),n(108,145),n(109,141),n(110,139),n(112,133),n(113,131),n(116,127),n(117,125),n(119,122),n(121,121),n(123,120),n(125,122),n(125,125),n(127,130),n(128,133),n(131,143),n(136,153),n(140,163),n(144,172),n(145,175),n(151,189),n(156,201),n(161,213),n(166,225),n(169,233),n(171,236),n(174,243),n(177,247),n(178,249),n(179,251),n(180,253),n(180,255),n(179,257),n(177,257),n(174,255),n(169,250),n(164,247),n(160,245),n(149,238),n(138,230),n(127,221),n(124,220),n(112,212),n(110,210),n(96,201),n(84,195),n(74,190),n(64,182),n(55,175),n(51,172),n(49,170),n(51,169),n(56,169),n(66,169),n(78,168),n(92,166),n(107,164),n(123,161),n(140,162),n(156,162),n(171,160),n(173,160),n(186,160),n(195,160),n(198,161),n(203,163),n(208,163),n(206,164),n(200,167),n(187,172),n(174,179),n(172,181),n(153,192),n(137,201),n(123,211),n(112,220),n(99,229),n(90,237),n(80,244),n(73,250),n(69,254),n(69,252)])),this.Templates.push(new i("pigtail",[n(81,219),n(84,218),n(86,220),n(88,220),n(90,220),n(92,219),n(95,220),n(97,219),n(99,220),n(102,218),n(105,217),n(107,216),n(110,216),n(113,214),n(116,212),n(118,210),n(121,208),n(124,205),n(126,202),n(129,199),n(132,196),n(136,191),n(139,187),n(142,182),n(144,179),n(146,174),n(148,170),n(149,168),n(151,162),n(152,160),n(152,157),n(152,155),n(152,151),n(152,149),n(152,146),n(149,142),n(148,139),n(145,137),n(141,135),n(139,135),n(134,136),n(130,140),n(128,142),n(126,145),n(122,150),n(119,158),n(117,163),n(115,170),n(114,175),n(117,184),n(120,190),n(125,199),n(129,203),n(133,208),n(138,213),n(145,215),n(155,218),n(164,219),n(166,219),n(177,219),n(182,218),n(192,216),n(196,213),n(199,212),n(201,211)])),this.Recognize=function(t){var e,s,n,a=+1/0,i=0;for(t=h(t,Y),e=c(t),t=l(t,-e),n=p(t),s=0;s<this.Templates.length;s++){var o=f(this.Templates[s].Vector,n);a>o&&(a=o,i=s)}return new r(this.Templates[i].Name,1/a)}}function h(t,e){var s,a=m(t)/(e-1),i=0,r=new Array(t[0]);for(s=1;s<t.length;s++){var o=X(t[s-1],t[s]);if(i+o>=a){var h=t[s-1].X+(a-i)/o*(t[s].X-t[s-1].X),c=t[s-1].Y+(a-i)/o*(t[s].Y-t[s-1].Y),l=n(h,c);r[r.length]=l,t.splice(s,0,l),i=0}else i+=o}return r.length==e-1&&(r[r.length]=n(t[t.length-1].X,t[t.length-1].Y)),r}function c(t){var e=v(t);return Math.atan2(e.Y-t[0].Y,e.X-t[0].X)}function l(t,e){var s,a=v(t),i=Math.cos(e),r=Math.sin(e),o=[];for(s=0;s<t.length;s++){var h=(t[s].X-a.X)*i-(t[s].Y-a.Y)*r+a.X,c=(t[s].X-a.X)*r+(t[s].Y-a.Y)*i+a.Y;o[o.length]=n(h,c)}return o}function u(t,e){var s,a=g(t),i=[];for(s=0;s<t.length;s++){var r=t[s].X*(e/a.Width),o=t[s].Y*(e/a.Height);i[i.length]=n(r,o)}return i}function d(t,e){var s,a=v(t),i=[];for(s=0;s<t.length;s++){var r=t[s].X+e.X-a.X,o=t[s].Y+e.Y-a.Y;i[i.length]=n(r,o)}return i}function p(t){var e,s,n=0,a=[];for(e=0;e<t.length;e++)a[a.length]=t[e].X,a[a.length]=t[e].Y,n+=t[e].X*t[e].X+t[e].Y*t[e].Y;for(s=Math.sqrt(n),e=0;e<a.length;e++)a[e]/=s;return a}function f(t,e){var s,n,a=0,i=0;for(s=0;s<t.length;s+=2)a+=t[s]*e[s]+t[s+1]*e[s+1],i+=t[s]*e[s+1]-t[s+1]*e[s];return n=Math.atan(i/a),Math.acos(a*Math.cos(n)+i*Math.sin(n))}function v(t){var e,s=0,a=0;for(e=0;e<t.length;e++)s+=t[e].X,a+=t[e].Y;return s/=t.length,a/=t.length,n(s,a)}function g(t){var e,s=+1/0,n=-1/0,i=+1/0,r=-1/0;for(e=0;e<t.length;e++)t[e].X<s&&(s=t[e].X),t[e].X>n&&(n=t[e].X),t[e].Y<i&&(i=t[e].Y),t[e].Y>r&&(r=t[e].Y);return new a(s,i,n-s,r-i)}function m(t){var e,s=0;for(e=1;e<t.length;e++)s+=X(t[e-1],t[e]);return s}function X(t,e){var s=e.X-t.X,n=e.Y-t.Y;return Math.sqrt(s*s+n*n)}t.fn.motionCaptcha=function(s){return this.each(function(){function a(t){var e,s;return t.touches&&t.touches.length>0?(e=t.touches[0].pageX-l.offset().left+p,s=t.touches[0].pageY-l.offset().top+f):t.offsetX?(e=t.offsetX-p,s=t.offsetY-f):(e=t.pageX-l.offset().left-p,s=t.pageY-l.offset().top-f),[e,s]}var i=t.extend({},t.fn.motionCaptcha.defaults,s);i.actionId="#"+i.actionId.replace(/\#/g,""),i.canvasId="#"+i.canvasId.replace(/\#/g,""),i.divId="#"+i.divId.replace(/\#/g,""),i.submitId=i.submitId?"#"+i.submitId.replace(/\#/g,""):!1;var r,h=!1,c=(t("body"),t(this)),l=(t(i.divId),t(i.canvasId)),u=l.width(),d=l.height(),p=1*l.css("borderLeftWidth").replace("px",""),f=1*l.css("borderTopWidth").replace("px","");l[0].width=u,l[0].height=d;var v=l[0].getContext("2d");v.canvasWidth=u,v.canvasHeight=d,v.font=i.canvasFont,v.fillStyle=i.canvasTextColor,l.addClass(i.shapes[Math.floor(Math.random()*i.shapes.length)]);var g=!1,m=!1,X=[],Y=new o;r=new e(v);var x=function(e){if(h)return!1;e.preventDefault();var s=a(e),i=s[0],o=s[1];return g=!0,m=!0,t("body").addClass("mc-noselect"),v.clearRect(0,0,u,d),r.strokeStart(i,o),l.removeClass("mc-invalid mc-valid"),X=[n(i,o)],!1},w=function(t){if(m)return m=0;if(!h&&g){t.preventDefault();var e=a(t),s=e[0],i=e[1];X[X.length]=n(s,i),r.stroke(s,i)}return!1},T=function(){if(!h&&g)if(g=!1,t("body").removeClass("mc-noselect"),X.length>=10){var e=Y.Recognize(X);l.attr("class").match(e.Name)&&e.Score>.7?(h=1,setTimeout(r.destroy,500),l.addClass("mc-valid"),v.fillText(i.successMsg,10,24),i.onSuccess(c,l,v)):(l.addClass("mc-invalid"),v.fillText(i.errorMsg,10,24),i.onError(c,l,v))}else l.addClass("mc-invalid"),v.fillText(i.errorMsg,10,24),i.onError(c,l,v);return!1};l.bind({mousedown:x,mousemove:w,mouseup:T}),l[0].addEventListener("touchstart",x,!1),l[0].addEventListener("touchmove",w,!1),l[0].addEventListener("touchend",T,!1),c.addClass(i.cssClass.replace(/\./,""))})},t.fn.motionCaptcha.defaults={actionId:"#mc-action",divId:"#mc",canvasId:"#mc-canvas",submitId:!1,cssClass:".mc-active",shapes:["triangle","x","rectangle","circle","check","caret","zigzag","arrow","leftbracket","rightbracket","v","delete","star","pigtail"],canvasFont:'15px "Lucida Grande"',canvasTextColor:"#111",errorMsg:"Please try again.",successMsg:"Captcha passed!",noCanvasMsg:"Your browser doesn't support <canvas> - try Chrome, FF4, Safari or IE9.",label:"<p>Please draw the shape in the box to submit the form:</p>",onSuccess:function(e){var s=this,n=s.submitId?e.find(s.submitId):e.find("input[type=submit]:disabled");e.attr("action",t(s.actionId).val()),n.prop("disabled",!1)},onError:function(){}},e.prototype={ctx:null,X:null,Y:null,painters:null,interval:null,init:function(t){function e(){var t;for(s.ctx.lineWidth=a,s.ctx.strokeStyle="rgba("+i[0]+", "+i[1]+", "+i[2]+", 0.06)",t=0;t<s.painters.length;t++)s.ctx.beginPath(),s.ctx.moveTo(s.painters[t].dx,s.painters[t].dy),s.painters[t].dx-=s.painters[t].ax=(s.painters[t].ax+(s.painters[t].dx-s.X)*s.painters[t].div)*s.painters[t].ease,s.painters[t].dy-=s.painters[t].ay=(s.painters[t].ay+(s.painters[t].dy-s.Y)*s.painters[t].div)*s.painters[t].ease,s.ctx.lineTo(s.painters[t].dx,s.painters[t].dy),s.ctx.stroke()}var s=this,n=navigator.userAgent.toLowerCase(),a=n.search("android")>-1||n.search("iphone")>-1?2:1,i=[0,0,0];this.ctx=t,this.ctx.globalCompositeOperation="source-over",this.X=this.ctx.canvasWidth/2,this.Y=this.ctx.canvasHeight/2,this.painters=[];for(var r=0;38>r;r++)this.painters.push({dx:this.ctx.canvasWidth/2,dy:this.ctx.canvasHeight/2,ax:0,ay:0,div:.1,ease:.18*Math.random()+.6});this.interval=setInterval(e,1e3/60)},destroy:function(){clearInterval(this.interval)},strokeStart:function(t,e){this.X=t,this.Y=e;for(var s=0;s<this.painters.length;s++)this.painters[s].dx=t,this.painters[s].dy=e;this.shouldDraw=!0},stroke:function(t,e){this.X=t,this.Y=e}};var Y=64,x=250,w=n(0,0)}(jQuery);